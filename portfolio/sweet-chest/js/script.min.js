"use strict";function _createForOfIteratorHelper(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}document.addEventListener("DOMContentLoaded",(function(e){var t,n,r=document.body,o={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return o.Android()||o.BlackBerry()||o.iOS()||o.Opera()||o.Windows()}};function i(e){this.type=e}o.any()?document.body.classList.add("_touch"):document.body.classList.add("_pc"),t=function(e){e?r.classList.add("_webp"):console.log("webp doesn't work in your browser")},(n=new Image).onload=n.onerror=function(){t(2==n.height)},n.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA",i.prototype.init=function(){var e=this,t=this;this.оbjects=[],this.daClassname="_dynamic_adapt_",this.nodes=document.querySelectorAll("[data-da]");for(var n=0;n<this.nodes.length;n++){var r=this.nodes[n],o=r.dataset.da.trim().split(","),i={};i.element=r,i.parent=r.parentNode,i.destination=document.querySelector(o[0].trim()),i.breakpoint=o[1]?o[1].trim():"767",i.place=o[2]?o[2].trim():"last",i.index=this.indexInParent(i.parent,i.element),this.оbjects.push(i)}this.arraySort(this.оbjects),this.mediaQueries=Array.prototype.map.call(this.оbjects,(function(e){return"("+this.type+"-width: "+e.breakpoint+"px),"+e.breakpoint}),this),this.mediaQueries=Array.prototype.filter.call(this.mediaQueries,(function(e,t,n){return Array.prototype.indexOf.call(n,e)===t}));for(var a=function(n){var r=e.mediaQueries[n],o=String.prototype.split.call(r,","),i=window.matchMedia(o[0]),a=o[1],l=Array.prototype.filter.call(e.оbjects,(function(e){return e.breakpoint===a}));i.addListener((function(){t.mediaHandler(i,l)})),e.mediaHandler(i,l)},l=0;l<this.mediaQueries.length;l++)a(l)},i.prototype.mediaHandler=function(e,t){if(e.matches)for(var n=0;n<t.length;n++){var r=t[n];r.index=this.indexInParent(r.parent,r.element),this.moveTo(r.place,r.element,r.destination)}else for(var o=t.length-1;o>=0;o--){var i=t[o];i.element.classList.contains(this.daClassname)&&this.moveBack(i.parent,i.element,i.index)}},i.prototype.moveTo=function(e,t,n){t.classList.add(this.daClassname),"last"===e||e>=n.children.length?n.insertAdjacentElement("beforeend",t):"first"!==e?n.children[e].insertAdjacentElement("beforebegin",t):n.insertAdjacentElement("afterbegin",t)},i.prototype.moveBack=function(e,t,n){t.classList.remove(this.daClassname),void 0!==e.children[n]?e.children[n].insertAdjacentElement("beforebegin",t):e.insertAdjacentElement("beforeend",t)},i.prototype.indexInParent=function(e,t){var n=Array.prototype.slice.call(e.children);return Array.prototype.indexOf.call(n,t)},i.prototype.arraySort=function(e){"min"===this.type?Array.prototype.sort.call(e,(function(e,t){return e.breakpoint===t.breakpoint?e.place===t.place?0:"first"===e.place||"last"===t.place?-1:"last"===e.place||"first"===t.place?1:e.place-t.place:e.breakpoint-t.breakpoint})):Array.prototype.sort.call(e,(function(e,t){return e.breakpoint===t.breakpoint?e.place===t.place?0:"first"===e.place||"last"===t.place?1:"last"===e.place||"first"===t.place?-1:t.place-e.place:t.breakpoint-e.breakpoint}))},new i("max").init();var a=document.querySelectorAll(".popup-link"),l=document.querySelectorAll(".lock-padding"),c=!0,s=800;if(a.length>0)for(var d=0;d<a.length;d++)a[d].addEventListener("click",(function(e){e.preventDefault();var t=e.target.getAttribute("href").substring(1);u(document.getElementById(t))}));function u(e){e&&c&&(document.querySelector(".popup._open")?p(e,!1):function(){var e=window.innerWidth-document.querySelector("#wrapper").offsetWidth+"px";if(l.length>0)for(var t=0;t<l.length;t++){l[t].style.paddingRight=e}r.style.paddingRight=e,r.classList.add("_lock"),c=!1,setTimeout((function(){c=!0}),s)}(),e.classList.add("_open"),e.addEventListener("click",(function(e){e.target.closest(".popup__content")||p(e.target.closest(".popup"))})),e.querySelector(".popup__close").addEventListener("click",(function(t){p(e)})))}function p(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];c&&(e.classList.remove("_open"),t&&f())}function f(){setTimeout((function(){if(l.length>0)for(var e=0;e<l.length;e++){l[e].style.paddingRight="0px"}r.style.paddingRight="0px",r.classList.remove("_lock")}),s),c=!1,setTimeout((function(){c=!0}),s)}document.addEventListener("keydown",(function(e){if(27===e.which){var t=document.querySelector(".popup._open");t&&p(t)}})),document.querySelectorAll(".anchor-link").forEach((function(e){e.addEventListener("click",(function(e){e.preventDefault();var t=this.getAttribute("href").substring(1),n=document.getElementById(t).getBoundingClientRect().top+pageYOffset;window.scrollTo({top:n,behavior:"smooth"})}))}));var m=document.querySelectorAll(".parallax");function h(){o.any()||window.innerWidth<=1e3?r.classList.add("_no-parallax"):(r.classList.contains("_no-parallax")&&r.classList.remove("_no-parallax"),m.length>0&&m.forEach((function(e){var t=e.querySelectorAll(".parallax__item");e.onmousemove=function(n){for(var r=n.clientX/e.offsetWidth,o=n.clientY/e.offsetHeight,i=0;i<t.length;i++)t[i].style.transform="translate(-".concat(60*r,"px, -").concat(60*o,"px)")}})))}window.addEventListener("resize",h),h();var y=document.querySelector(".header__menu-btn"),g=document.querySelector("header.header");y.addEventListener("click",(function(e){y.classList.toggle("_active"),g.classList.toggle("_open"),r.classList.toggle("_lock")}));var v=document.getElementById("preloader");setTimeout((function(){v.classList.contains("_done")||(v.style.opacity="0",document.body.classList.remove("_lock"),setTimeout((function(){v.classList.add("_done")}),1e3))}),1e3);var b=document.querySelectorAll(".lazy-load"),A=[];var w=new IntersectionObserver((function(e,t){e.forEach((function(e){if(e.intersectionRatio>0)return function(e){var t=e.dataset.src;if(-1==A.indexOf(t)&&(e.src=t,A.push(t),e.previousElementSibling&&"SOURCE"==e.previousElementSibling.tagName)){var n=e.previousElementSibling;n.setAttribute("srcset",n.dataset.srcset)}return e}(e.target)}))}),{root:null,rootMargin:"0px",treshold:.1});b.forEach((function(e){w.observe(e)}));var L=document.getElementById("formImage"),k=document.getElementById("formPreview");L.addEventListener("change",(function(){!function(e){if(!["image/png","image/jpeg","image/gif","image/webp"].includes(e.type))return alert("Разрешены только изображения!"),void(L.value="");if(e.size>5*Math.pow(1024,2))return void alert("Файл должен быть меньше 5 мб!");var t=new FileReader;t.readAsText(e),t.onload=function(){var t=e.name,n=8,r=t.indexOf("."),o=t.slice(r-2,t.length);t.length>n&&(t="".concat(t.slice(0,n),"...").concat(o)),k.innerHTML=t},t.onerror=function(){alert("Ошибочка! Перезагрузите страницу и попробуйте еще раз.")}}(L.files[0])}));var _,S=_createForOfIteratorHelper(document.querySelectorAll(".feedback-slider__item"));try{var x=function(){var e=_.value,t=e.querySelector(".slider-item__text");if(t.querySelector("#secondary-text")){e.querySelector("#secondary-text").hidden=!0;var n=document.createElement("a");t.appendChild(n),n.setAttribute("href","#"),n.setAttribute("id","read-more-link"),n.innerHTML="Читать отзыв полностью",n.onclick=function(e){e.preventDefault();var r=(t=e.target.parentNode).querySelector("#secondary-text");r.hidden?(n.innerHTML="Скрыть",r.hidden=!1):(n.innerHTML="Читать отзыв полностью",r.hidden=!0)}}};for(S.s();!(_=S.n()).done;)x()}catch(e){S.e(e)}finally{S.f()}if(document.querySelectorAll("[data-fslightbox]").length>0){var E=0;window.onscroll=function(){E=window.pageYOffset,fsLightboxInstances["portfolio-gallery"].props.onOpen=function(){window.pageYOffset=E},fsLightboxInstances["portfolio-gallery"].props.onClose=function(){window.scrollTo({top:E,behavior:"smooth"})}}}}));